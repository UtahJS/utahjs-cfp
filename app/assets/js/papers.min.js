!function(a,b,c){function d(){var a=b.getItem("uid");return a||(a=Math.floor(1e8*Math.random()),b.setItem("uid",a)),a}function e(b,c,e){return"object"==typeof c&&(c.uid=d()),a.ajax(a.extend({type:"post",url:"/"+b+".json",data:c},e||{}))}function f(){b.setItem("cfp-votes",c.stringify(j))}function g(a){j[a]=1,f()}function h(a){j[a]=1,f()}function i(a){return!!j[a]}var j=c.parse(b.getItem("cfp-votes"))||{};a(function(){a(".paper").each(function(){var b=a(this),c=b.attr("data-id"),d=b.find(".description .excerpt"),f=b.find(".description .fulldesc");b.find(".description .more").click(function(a){a.preventDefault(),d.hide(),f.slideDown(300)}),b.find(".description .less").click(function(a){a.preventDefault(),f.slideUp(300,function(){d.show()})});var j=b.find(".voteup"),k=j.find(".score");i(c)&&j.addClass("upvoted"),j.click(function(b){b.preventDefault();var d=a(this);d.hasClass("upvoted")?(score=-1,d.removeClass("upvoted"),h(c)):(score=1,d.addClass("upvoted"),g(c));var f=parseFloat(k.text())+score;k.fadeOut(400,function(){k.text(f).fadeIn(400)}),e("tally",{id:c,score:score})}),b.find(".favorite").click(function(b){b.preventDefault();var d=a(this),f=d.hasClass("favorited")?"0":"1";d.toggleClass("favorited"),e("admin-favorite",{id:c,onoff:f})}),b.find(".delete").click(function(a){a.preventDefault(),confirm("Are you sure you want to delete this submission?")&&(b.remove(),e("admin-delete",{id:c,state:0}))});var l=b.find(".comment-text");b.find(".comment").click(function(b){b.preventDefault();var d=(a(this),prompt("Comment:",l.text()));null!==d&&(l.text(d),e("admin-comment",{id:c,comment:d}))})})})}(jQuery,window.localStorage||{getItem:jQuery.noop,setItem:jQuery.noop},window.JSON||{stringify:jQuery.noop,parse:jQuery.noop});